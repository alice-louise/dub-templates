console.log("Conditional Logic JS – dropdown value support – v2025-02-01y-1");const CONDITIONAL_PREFIXES=["conditional-display","conditional-trigger","conditional-group","conditional-disable-group","conditional-hide-trigger","conditional-hide-display"];const COLOR_PALETTE=["#FF6633","#7FE5F0","#00B8AE","#9A8899","#00B3E6","#E6B333","#3366E6","#999966","#B34D4D","#80B300","#809900","#E6B3B3","#6680B3","#66991A","#FF99E6","#FF1A66","#E6331A","#33FFCC","#B366CC","#4D8000","#B33300","#CC80CC","#66664D","#991AFF","#E666FF","#4DB3FF","#1AB399","#E666B3","#33991A","#CC9999","#B3B31A","#00E680","#4D8066","#809980","#E6FF80","#1AFF33","#999933","#FF3380","#CCCC00","#66E64D","#4D80CC","#9900B3","#E64D66","#4DB380","#FF4D4D","#99E6E6","#6666FF"];const EDIT_CONTEXT_SELECTORS=["view-form-public-component","legacy-form-preview-component","#edit-form","#view-form"];const CLASS_KEEPERS=new Set(["row","item","packageNotSelected","packageSelected","selected","ng-scope","column"]);function safeAddClass(e,t){if(!e||!e.classList)return;if(!t)return;const o=t.trim();if(o==="")return;if(/\s/.test(o)){console.warn("Blocked invalid class:",JSON.stringify(t));return}e.classList.add(o)}function hasEditContext(){return EDIT_CONTEXT_SELECTORS.some(e=>document.querySelector(e)!==null)}function hasFormViewer(){return document.querySelector(".form-viewer")!==null}function normalizeForCSS(e){return e.toLowerCase().trim().replace(/\s+/g,"-").replace(/[^a-z0-9-_]/g,"")}function displayValueMatchesTrigger(e,t){const o=Array.from(e.classList).filter(e=>e.startsWith("cl-value-")).map(e=>e.replace("cl-value-",""));if(o.length===0)return!0;const i=t.closest(".container-form-element__column")||t.closest(".column");if(!i)return!1;const n=i.querySelector("input[type='radio']:checked");if(n){const e=n.closest(".radio-option")?.querySelector("label");if(!e)return!1;const t=normalizeForCSS(e.textContent||"");return o.includes(t)}const s=i.querySelector("select");if(s&&s.selectedIndex>-1&&s.options[s.selectedIndex]&&!s.options[s.selectedIndex].disabled&&s.value!==""){const e=s.options[s.selectedIndex];const t=normalizeForCSS(e.value||e.textContent||"");return o.includes(t)}return!1}function assignConditionalLogic(e){if(hasEditContext()){const t=`${e}-identify`;const o=`${e}-id`;const i=document.getElementsByClassName(t);for(let e=0;e<i.length;e+=1){const t=i[e];const n=t.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<n.length;e+=1){const i=n[e];if(i.includes("cl-")||i.includes("clhide-")){t.parentNode.style.minHeight="0";const e=t.closest(".column");safeAddClass(e,i);e.classList.add(o);e.classList.add("conditional-id")}}}}if(hasFormViewer()){const t=`${e}-identify`;const o=`${e}-id`;const i=document.getElementsByClassName(t);for(let e=0;e<i.length;e+=1){const t=i[e];const n=t.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<n.length;e+=1){const i=n[e];if(i.includes("cl-")||i.includes("clhide-")){t.parentNode.style.minHeight="0";const e=t.closest(".container-form-element__column");safeAddClass(e,i);e.classList.add(o);e.classList.add("conditional-id")}}}}}function assignConditionalClasses(){CONDITIONAL_PREFIXES.forEach(e=>assignConditionalLogic(e))}function removeConditionalLogicDisplay(){if(document.querySelector("#edit-form")===null)return;const e=document.querySelectorAll(".conditional-display-id");e.forEach(e=>{e.classList.remove("conditional-display-id");const t=e.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");t.forEach(t=>{const o=CLASS_KEEPERS.has(t)||t.includes("col-")||t.includes(" ");o||e.classList.remove(t)})})}function removeConditionalLogicTrigger(){if(document.querySelector("#edit-form")===null)return;const e=document.querySelectorAll(".conditional-trigger-id");e.forEach(e=>{e.classList.remove("conditional-trigger-id");const t=e.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");t.forEach(t=>{const o=CLASS_KEEPERS.has(t)||t.includes("col-")||t.includes(" ");o||e.classList.remove(t)})})}function removeConditionalGroup(){if(document.querySelector("#edit-form")===null)return;const e=document.querySelectorAll(".conditional-group-id");e.forEach(e=>{e.classList.remove("conditional-group-id");const t=e.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");t.forEach(t=>{const o=CLASS_KEEPERS.has(t)||t.includes("col-")||t.includes(" ");o||e.classList.remove(t)})})}function assignConditionalLogicTriggerDisable(){if(hasEditContext()){const e=document.getElementsByClassName("disable-group");for(let t=0;t<e.length;t+=1){const o=e[t];const i=o.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<i.length;e+=1){const t=i[e];if(t.includes("group-cl-")||t.includes("cl-")){o.parentNode.style.minHeight="0";const e=o.closest(".column");safeAddClass(e,t);e.classList.add("conditional-group-disable-id")}}}}if(hasFormViewer()){const e=document.getElementsByClassName("disable-group");for(let t=0;t<e.length;t+=1){const o=e[t];const i=o.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<i.length;e+=1){const t=i[e];if(t.includes("group-cl-")||t.includes("cl-")){o.parentNode.style.minHeight="0";const e=o.closest(".container-form-element__column");safeAddClass(e,t);e.classList.add("conditional-group-disable-id")}}}}}function conditionalLogic(){const e=document.getElementsByClassName("conditional-display-id");for(let t=0;t<e.length;t+=1){let o=!1;const i=e[t];const n=i.parentNode;const s=i.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<s.length;e+=1){const t=s[e];if(t.includes("cl-")){const e=document.getElementsByClassName("conditional-trigger-id");for(let s=0;s<e.length;s+=1){const l=e[s];if(l.classList.contains(t)){const e=isTriggerSelected(l)&&displayValueMatchesTrigger(i,l);o=o||e;if(o){i.classList.add("show-content");n.classList.remove("remove-padding")}else{i.classList.remove("show-content");n.classList.add("remove-padding")}}}}}}}function conditionalLogicRemoveItem(){const e=document.getElementsByClassName("conditional-hide-display-id");for(let t=0;t<e.length;t+=1){let o=!1;const i=e[t];const n=i.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<n.length;e+=1){const t=n[e];if(t.includes("clhide-")){const e=document.getElementsByClassName("conditional-hide-trigger-id");for(let n=0;n<e.length;n+=1){const s=e[n];if(s.classList.contains(t)){const e=isTriggerSelected(s);o=o||e;o?i.classList.add("hide-content"):i.classList.remove("hide-content")}}}}}}function conditionalLogicRemoveWorkflows(){const e=document.getElementsByClassName("conditional-display-id");for(let t=0;t<e.length;t+=1){const o=e[t];const i=o.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<i.length;e+=1){const t=i[e];if(t.includes("cl-")){const e=document.getElementsByClassName("conditional-trigger-id");for(let i=0;i<e.length;i+=1){const n=e[i];if(n.classList.contains(t)){const e=!isTriggerSelected(n);if(e){const e=o.querySelectorAll("select");for(let t=0;t<e.length;t+=1){e[t].value="";e[t].selectedIndex=0}}}}}}}}function conditionalLogicDisableFunction(){if(hasEditContext()){const e=document.getElementsByClassName("conditional-group-disable-id");for(let t=0;t<e.length;t+=1){const o=e[t];const i=o.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<i.length;e+=1){const t=i[e];if(t.includes("group-cl-")){const e=`.${t}`;const o=document.querySelectorAll(e);let i=!1;o.forEach(e=>{i=i||isTriggerSelected(e)});o.forEach(e=>{if(i){const t=e.getElementsByClassName("packageNotSelected");for(let e=0;e<t.length;e+=1)t[e].classList.add("disable-package");const o=e.querySelectorAll(".clip-check .ng-empty");for(let e=0;e<o.length;e+=1)o[e].parentElement.classList.add("disable-package")}else{const t=e.getElementsByClassName("packageNotSelected");for(let e=0;e<t.length;e+=1)t[e].classList.remove("disable-package");const o=e.querySelectorAll(".clip-check .ng-empty");for(let e=0;e<o.length;e+=1)o[e].parentElement.classList.remove("disable-package")}})}}}}if(hasFormViewer()){const e=document.getElementsByClassName("conditional-group-disable-id");for(let t=0;t<e.length;t+=1){const o=e[t];const i=o.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<i.length;e+=1){const t=i[e];if(t.includes("group-cl-")){const e=`.${t}`;const o=document.querySelectorAll(e);let i=!1;o.forEach(e=>{i=i||isTriggerSelected(e)});o.forEach(e=>{if(i){const t=e.getElementsByClassName("packageNotSelected");for(let e=0;e<t.length;e+=1)t[e].classList.add("disable-package");const o=e.querySelectorAll(".checkboxNotChecked");for(let e=0;e<o.length;e+=1)o[e].classList.add("disable-package");const i=e.querySelectorAll(".checkboxChecked");for(let e=0;e<i.length;e+=1)i[e].classList.remove("disable-package")}else{const t=e.getElementsByClassName("packageNotSelected");for(let e=0;e<t.length;e+=1)t[e].classList.remove("disable-package");const o=e.querySelectorAll(".checkboxNotChecked");for(let e=0;e<o.length;e+=1)o[e].classList.remove("disable-package")}})}}}}}function addCheckboxID(){if(!hasFormViewer())return;const e=document.querySelectorAll("input[type='checkbox']");e.forEach(e=>{const t=e.closest(".checkbox-option");if(!t)return;t.classList.remove("checkboxChecked");t.classList.add("checkboxNotChecked")});const t=document.querySelectorAll("input[type='checkbox']:checked");t.forEach(e=>{const t=e.closest(".checkbox-option");if(!t)return;t.classList.add("checkboxChecked");t.classList.remove("checkboxNotChecked")})}function addConditionalGuides(){const e=document.getElementById("toggle-conditional-guidelines");if(!e)return;if(e.checked===!0){let e="";const t=document.getElementsByClassName("conditional-id");for(let o=0;o<t.length;o+=1){const i=t[o];const n=i.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let t=0;t<n.length;t+=1){const i=n[t];if(i.includes("cl-")&&!i.includes("group")){e=`${e} ${i}`;const t=document.getElementsByClassName("conditional-trigger-id");for(let e=0;e<t.length;e+=1){let n="";const s=t[e];const l=s.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<l.length;e+=1){const t=l[e];if(t.includes("cl-")){n=`${n} ${t}`;if(s.classList.contains(i)){if(s.querySelector(".conditional-guides")===null&&n!==""){const e=document.createElement("div");e.classList.add("conditional-guides");e.style.backgroundColor=COLOR_PALETTE[o];e.style.color="white";e.style.padding="10px 20px";e.style.display="block";e.style.textTransform="uppercase";e.style.letterSpacing="1px";e.style.fontSize="10px";s.style.border="1px solid";s.style.borderColor=COLOR_PALETTE[o];e.innerHTML=`Conditional Trigger:${n}`;s.insertBefore(e,s.firstChild)}if(n!==""&&s.querySelector(".conditional-guides")!==null){const e=s.querySelector("div.conditional-guides");e.innerHTML=`Conditional Trigger:${n}`;e.style.backgroundColor=COLOR_PALETTE[o];s.style.borderColor=COLOR_PALETTE[o]}}}}}const n=document.getElementsByClassName("conditional-display-id");for(let e=0;e<n.length;e+=1){let t="";const s=n[e];const l=s.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<l.length;e+=1){const n=l[e];if(n.includes("cl-")){t=`${t} ${n}`;if(s.classList.contains(i)){if(s.querySelector(".conditional-guides")===null&&t!==""){const e=document.createElement("div");e.classList.add("conditional-guides");e.style.backgroundColor=COLOR_PALETTE[o];e.style.color="white";e.style.padding="10px 20px";e.style.display="block";e.style.textTransform="uppercase";e.style.letterSpacing="1px";e.style.fontSize="10px";s.style.border="1px solid";s.style.borderColor=COLOR_PALETTE[o];e.innerHTML=`Conditional Display:${t}`;s.insertBefore(e,s.firstChild)}if(t!==""&&s.querySelector(".conditional-guides")!==null){const e=s.querySelector("div.conditional-guides");e.innerHTML=`Conditional Display:${t}`;e.style.backgroundColor=COLOR_PALETTE[o];s.style.borderColor=COLOR_PALETTE[o]}}}}}}}}}if(e.checked===!1){const e=document.querySelectorAll("div.conditional-guides");e.forEach(e=>{e.parentNode.style.border="0px solid";e.parentNode.removeChild(e)})}}function removeConditionalGuidelines(){const e=document.querySelectorAll("div.conditional-guides");e.forEach(e=>{const t=e.parentNode;const o=t.classList.contains("conditional-id");if(!o){const e=t.querySelectorAll("div.conditional-guides");e.forEach(e=>{e.parentNode.style.border="0px solid";e.parentNode.removeChild(e)})}})}function conditionalRequired(){const e=document.querySelectorAll("input");e.forEach(e=>{e.hasAttribute("required")&&e.classList.add("required-catch")});const t=document.getElementsByClassName("conditional-display-id");for(let e=0;e<t.length;e+=1){let o=!1;const i=t[e];const n=i.classList.toString().split(" ").map(e=>e.trim()).filter(e=>e!=="");for(let e=0;e<n.length;e+=1){const t=n[e];if(t.includes("cl-")){const e=document.getElementsByClassName("conditional-trigger-id");for(let n=0;n<e.length;n+=1){const s=e[n];if(s.classList.contains(t)){const e=isTriggerSelected(s);o=o||e;if(o){const e=i.querySelectorAll(".required-catch");e.forEach(e=>{e.removeAttribute("required");e.setAttribute("ng-required","false")})}else{const e=i.querySelectorAll(".required-catch");e.forEach(e=>{e.setAttribute("required","required")})}}}}}}}function identifyMainCodes(){if(hasEditContext()&&document.querySelectorAll("div.hide-on-front")){const e=document.querySelectorAll("div.hide-on-front");e.forEach(e=>{const t=e.closest(".row");t.classList.add("main-codes-id");document.querySelector("#edit-form")!==null&&t.setAttribute("style","margin-top:0px!important;margin-bottom:0px!important; border:0px")})}if(hasFormViewer()){if(document.querySelectorAll(".hide-on-front")){const e=document.querySelectorAll("div.hide-on-front");e.forEach(e=>{const t=e.closest(".form-element__content");t.classList.add("hide-on-front-id");t.setAttribute("style","margin-top:0px!important;margin-bottom:0px!important;padding:0px!important;height:0px;overflow:hidden;")})}if(document.querySelectorAll(".hide-on-front")){const e=document.querySelectorAll("b.hide-on-front");e.forEach(e=>{const t=e.closest(".form-element__content");t.classList.add("hide-on-front-id");t.setAttribute("style","margin-top:0px!important;margin-bottom:0px!important;padding:0px!important;height:0px;overflow:hidden;")})}}}function conditionalCheck(){document.addEventListener("click",()=>{conditionalLogicDisableFunction();conditionalLogic();conditionalLogicRemoveItem();addCheckboxID()},!1)}function conditionalCheckSelects(){document.addEventListener("change",e=>{if(e.target&&e.target.tagName==="SELECT"){conditionalLogicDisableFunction();conditionalLogic();conditionalLogicRemoveItem();addCheckboxID()}},!1)}function conditionalCheckMouse(){const e=document.getElementsByClassName("conditional-trigger-id");for(let t=0;t<e.length;t+=1)e[t].addEventListener("mousemove",()=>{conditionalLogicDisableFunction();conditionalLogic();conditionalLogicRemoveItem();addCheckboxID()},!1)}function whileEdit(){document.querySelector("#edit-form")!==null&&setInterval(()=>{addConditionalGuides();removeConditionalGuidelines();removeConditionalLogicDisplay();removeConditionalLogicTrigger();removeConditionalGroup();assignConditionalClasses();assignConditionalLogicTriggerDisable();identifyMainCodes()},250)}function startJavascript(){assignConditionalClasses();assignConditionalLogicTriggerDisable();conditionalLogicDisableFunction();conditionalLogicRemoveItem();whileEdit();identifyMainCodes();conditionalLogic();conditionalCheck();conditionalCheckMouse();conditionalCheckSelects()}startJavascript();
